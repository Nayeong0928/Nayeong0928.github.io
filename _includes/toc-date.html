<div class="book-summary">
    <script type="text/javascript">
        function pageScrollToTop(element) {
            $('div.body-inner').animate({ scrollTop: 0 });
            $(element).parent().find('li>ul>li').removeClass('active');
            return true;
        }

        // Toggle visibility of category posts
        function toggleCategory(element) {
            const sublist = $(element).next('ul'); // 하위 UL 요소 선택
            const isVisible = sublist.is(':visible');

            // 상태 변경
            if (isVisible) {
                sublist.slideUp(); // 펼쳐진 상태에서 닫기
                $(element).removeClass('expanded'); // 아이콘이나 스타일 변경
            } else {
                sublist.slideDown(); // 닫힌 상태에서 열기
                $(element).addClass('expanded'); // 아이콘이나 스타일 변경
            }
            return false; // 기본 링크 동작 막기
        }
    </script>

    <nav role="navigation">
        <div id="book-search-input" role="search">
            <input type="text" placeholder="Type to search" />
        </div>
        <ul class="summary">
            {% if page.url == "/index.html" or page.url == "/" %}
            <li class="chapter active" data-level="1.1" data-path="{{site.baseurl}}">
                {% else %}
            <li class="chapter" data-level="1.1" data-path="{{site.baseurl}}">
                {% endif %}
                <a href="{{site.baseurl}}/" onclick="pageScrollToTop(this)">
                    {{ site.title | escape }}
                </a>
            </li>

            <li class="divider"></li>

            {% assign categories = site.categories | sort %}
            {% for category, posts in categories %}
            <li class="chapter">
                <!-- 카테고리 클릭 시 toggleCategory 함수 호출 -->
                <a href="#" onclick="return toggleCategory(this);">
                    {{ category | capitalize }}
                </a>
                <ul style="display: none;"> <!-- 기본적으로 숨김 상태 -->
                    {% assign sorted_posts = posts | sort: 'date' %}
                    {% for post in sorted_posts %}
                    <li class="{% if page.url == post.url %}active{% endif %}" data-level="1.2">
                        <a href="{{site.baseurl}}{{post.url}}" onclick="pageScrollToTop(this)">
                            {{ post.title | escape }}
                        </a>
                    </li>
                    {% endfor %}
                </ul>
            </li>
            {% endfor %}
        </ul>
    </nav>
</div>
